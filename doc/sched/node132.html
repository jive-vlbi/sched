<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.50)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>OPTMODE</TITLE>
<META NAME="description" CONTENT="OPTMODE">
<META NAME="keywords" CONTENT="sched">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="sched.css">

<LINK REL="next" HREF="node133.html">
<LINK REL="previous" HREF="node131.html">
<LINK REL="up" HREF="node52.html">
<LINK REL="next" HREF="node133.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html2153"
  HREF="node133.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2149"
  HREF="node52.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2143"
  HREF="node131.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2151"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2154"
  HREF="node133.html">OPTLOWT</A>
<B> Up:</B> <A NAME="tex2html2150"
  HREF="node52.html">Details of SCHED&nbsp; Parameters</A>
<B> Previous:</B> <A NAME="tex2html2144"
  HREF="node131.html">OPSKIP</A>
 &nbsp <B>  <A NAME="tex2html2152"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION004128000000000000000"></A><A NAME="MP:OPTMODE"></A>
<BR>
<TT>OPTMODE</TT>
</H3>

<P>
<TT>OPTMODE</TT> sets the optimization mode.  The valid modes are:

<P>
<DL>
<DT><STRONG><TT>NONE</TT>.</STRONG></DT>
<DD>This is the default.  The input schedule will
be used as specified.

<P>
</DD>
<DT><STRONG><TT>SCANS</TT>.</STRONG></DT>
<DD>For this mode, the schedule will be followed
as specified.  However only scans with more than <TT>OPMINANT</TT>
antennas with the source up (above the horizon and within the slew
limits) and above <TT>OPMINEL</TT> will be accepted.  For each accepted
scan only those antennas that are up and above <TT>OPMINEL</TT> will
be scheduled unless <TT>OPNOSUB</TT> is specified.  <TT>DWELL</TT>
would normally be specified to allow for slews.  Subarraying will
happen if two successive souces can only be seen by different antennas
since the optimization keeps track of the previous scan on a
per-antenna basis.

<P>
The usual way to use this mode is to specify a loop containing all
the desired sources (and frequencies etc.) and lasting longer than
the desired total time.  Then the optimization will pick the scans
that make sense and will quit after <TT>OPDUR</TT>.  This mode is
especially useful for scheduling pointing observations.

<P>
There is a trick available, triggered by <TT>OPSKIP</TT>, that is an
attempt to emphasize scans in desirable elevation ranges (set by
<TT>OPELPRIO</TT>.  If a loop is used, this will cause scans to be
skipped <TT>OPSKIP</TT> times before they are used again unless they
are in the desired elevation ranges.

<P>
There is another trick to give low priority to some scans using
<A HREF="node127.html#MP:OPMISS"><TT>OPMISS</TT></A>.  The current scan will only
be accepted if at least <TT>OPMISS</TT> preceeding scans in a row
have been missed.  If, for example, you have a loop of scans,
as is typical in pointing schedules, and you have one that you
only want to have used if all others are unacceptable (eg too low),
then set <TT>OPMISS</TT> to the length of the loop.

<P>
</DD>
<DT><STRONG><TT>CELLS</TT>.</STRONG></DT>
<DD>For this mode, the input scan list is treated
as a pool of possible scans.  The sky over each antenna is divided
into 9 cells (3 X 3 in Az and El) and the time that each cell
was sampled is recorded.  For each output scan, all input scans
are checked for which cells they sample and a weight is calculated
based on the time since the last time that cell was sampled.  The
weight is adjusted to discourage long slews with the characteristic
time scale of that discouragement set by <TT>OPTSLEW</TT> in minutes.
Also, if some low elevation cells for a station have not been
sampled in a long time (characteristic time scale set by <TT>OPTLOWT</TT>,
the weight for other low elevation cells will be increased.  This
tries to compensate for edge stations that have no mutual visibility
with the rest of the array for sources at low elevation in certain
directions.  The input scan to use is then selected based on the
adjusted weights.

<P>
This mode is an attempt to provide a mechanism for scheduling
geodetic type observations.  Parameters <TT>OPMINANT, OPMINEL,
OPDUR,</TT> and <TT>OPNOSUB</TT> have the same meanings for <TT>CELLS</TT>
mode as for <TT>SCANS</TT>.  The <TT>CSUB</TT> mode is able to do almost
the same thing as this mode plus it handles subarraying.  It may
eventually completely replace the <TT>CELLS</TT> mode.

<P>
</DD>
<DT><STRONG><TT>CSUB</TT>.</STRONG></DT>
<DD>This mode is much like the <TT>CELLS</TT> mode
except that it uses subarrays.  The sky over each antenna is divided
into 9 cells.  For each possible pair or sources, a scan is
constructed with each antenna observing the source for which the
priority is highest.  The priority is the result of the time since the
cell the source is in was sampled adjusted to downweight long slews
(<TT>OPTSLEW</TT>) and upweight low elevation scans when other low
elevation cells are not being sampled (<TT>OPTLOWT</TT>).  If the minimum
number of antennas per scan (<TT>OPMINANT</TT>) is not satisfied, some
are shifted so that it is.  Then the subarrayed scan is compared with
single source scans with each of the two sources and the best option
chosen.  There is a weighting factor which favors the single source
cases and has been adjusted so that something less than half the scans
include all stations.  Some day this should be made an input
parameter.  Finally, if there are more than 2 antennas left over, they
are put in a third subarray with an optimized source.

<P>
Like the <TT>CELLS</TT> mode, this mode is for geodetic type observations.
Various parameters have the same meaning here as for the other modes
except that OPNOSUB is not allowed since it doesn't make sense.
Also, OPMINANT is a goal.  The third subarray can have less as can
one of the other two under certain very special circumstances.

<P>
</DD>
<DT><STRONG><TT>UPTIME</TT>.</STRONG></DT>
<DD>This mode is designed for experiment planning.
For each input scan, it creates a string of scans of duration
<A HREF="node82.html#MP:DUR"><TT>DUR</TT></A> or <A HREF="node83.html#MP:DWELL"><TT>DWELL</TT></A>, spaced
by <A HREF="node97.html#MP:GAP"><TT>GAP</TT></A> (helps interpret UV plots), and lasting
for total time <A HREF="node125.html#MP:OPDUR"><TT>OPDUR</TT></A>.  All such series of
scans start at the start time of the first scan.  Usually (<TT>OPDUR=24:00:00</TT>) would be used to examine a whole day or the actual
start time and total duration of allocated time would be used.  Each
input scan would normally be on a different source.  Note that this
mode gives a backward time jump at the first scan based on each input
scan.  For this reason, writing telescope control files based on this
optimization mode is not allowed.

<P>
</DD>
</DL>

<P>
In all optimizing modes, SCHED&nbsp; will not schedule a scan that crosses
0 hr UT.  This is also true for dwell time scheduling.

<P>
<I>Note that the optimization modes are somewhat experimental.  If
they are used, the output schedule should be checked carefully.</I>

<P>

  </TT>
<UL>
<LI><B>Argument:</B> A mode.
</LI>
<LI><B>Options:</B>  <TT>'NONE', 'SCANS', 'CELLS', 'CSUB',</TT> and <TT>'UPTIME'</TT>
</LI>
<LI><B>Default:</B>  <TT>NONE
</LI>
<LI><B>Usage:</B>    Only one used in schedule -- the last.
</LI>
<LI><B>Example:</B>  <TT>OPTMODE 'CELLS'</TT>
  
</LI>
</UL>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2153"
  HREF="node133.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2149"
  HREF="node52.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2143"
  HREF="node131.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2151"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2154"
  HREF="node133.html">OPTLOWT</A>
<B> Up:</B> <A NAME="tex2html2150"
  HREF="node52.html">Details of SCHED&nbsp; Parameters</A>
<B> Previous:</B> <A NAME="tex2html2144"
  HREF="node131.html">OPSKIP</A>
 &nbsp <B>  <A NAME="tex2html2152"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Craig Walker
2005-06-29
</ADDRESS>
</BODY>
</HTML>
