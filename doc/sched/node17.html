<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.50)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Scan Times</TITLE>
<META NAME="description" CONTENT="Scan Times">
<META NAME="keywords" CONTENT="sched">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="sched.css">

<LINK REL="next" HREF="node18.html">
<LINK REL="previous" HREF="node16.html">
<LINK REL="up" HREF="node15.html">
<LINK REL="next" HREF="node18.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html465"
  HREF="node18.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html461"
  HREF="node15.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html455"
  HREF="node16.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html463"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html466"
  HREF="node18.html">Dynamic Scheduling</A>
<B> Up:</B> <A NAME="tex2html462"
  HREF="node15.html">Scheduling Tips</A>
<B> Previous:</B> <A NAME="tex2html456"
  HREF="node16.html">Observing Strategy</A>
 &nbsp <B>  <A NAME="tex2html464"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00322000000000000000"></A><A NAME="SSEC:SCANTIMES"></A>
<BR>
Scan Times
</H2>

<P>
There are a variety of way to set the time of a scan.  A <A HREF="node171.html#MP:START"><TT>START</TT></A> time must always be set for the first scan of a
schedule -- SCHED&nbsp; obviously has to know when to start.  After that,
the ways to set the scan times are:

<P>

<UL>
<LI>Set the <A HREF="node171.html#MP:START"><TT>START</TT></A> time and the
<A HREF="node173.html#MP:STOP"><TT>STOP</TT></A> time.

<P>
</LI>
<LI>Set just the <A HREF="node173.html#MP:STOP"><TT>STOP</TT></A> time.  SCHED&nbsp; will
use the previous scan's stop time as this scan's start time.

<P>
</LI>
<LI>Set the <A HREF="node171.html#MP:START"><TT>START</TT></A> time and the
<A HREF="node82.html#MP:DUR"><TT>DURation</TT></A>.  Sched will set the start time as
requested and the stop time to the start time plus the duration.

<P>
</LI>
<LI>Set a duration using <A HREF="node82.html#MP:DUR"><TT>DURation</TT></A>.  SCHED&nbsp; 
will set the start time to the previous scan's stop time and the
stop time to the start time plus the duration.

<P>
</LI>
<LI>Set a duration using <A HREF="node83.html#MP:DWELL"><TT>DWELL</TT></A>.  SCHED&nbsp; 
will set the start time to the previous scan's stop time plus the
time it takes to get all antennas on source.  Then it will set the
stop time to the start time plus the requested dwell time.  Note that
this option does not yet take into account correlator resync times, if
any, or time to switch between frequency bands (say 7mm to 2cm).

<P>
</LI>
<LI>Set a duration using either <A HREF="node82.html#MP:DUR"><TT>DURation</TT></A> or
<A HREF="node83.html#MP:DWELL"><TT>DWELL</TT></A> and set a minimum interval since the
previous scan with <A HREF="node97.html#MP:GAP"><TT>GAP</TT></A>.  The start time will
be set to the previous stop time plus the the time specified with <TT>GAP</TT>.  If <TT>DWELL</TT> was specified, the start time may be further
delayed to allow all antennas to reach the source.  The stop time
will be <TT>DURation</TT> or <TT>DWELL</TT> after the derived start time.

<P>
</LI>
<LI>Use any of the above to set the start and stop times, and then
offset the resulting start time with <A HREF="node148.html#MP:PRESCAN"><TT>PRESCAN</TT></A>.  Only the start time, not the stop time, is
affected by <TT>PRESCAN</TT>.  If <TT>PRESCAN</TT> is positive, the start
time is delayed.  If <TT>PRESCAN</TT> is negative, the start time is
moved earlier by the requested amount, although it will not be moved
into the previous scan.  This can be used to start recording early to
allow synchronization at the correlator, or to keep recording media
moving through short inter-scan intervals -- also helps
sychronization on processing.  <TT>PRESCAN</TT> shifts the start for all
stations by the same amount, and is reflected in the start times in
the summary and sch files.  <TT>PRESCAN</TT> is retained mainly for
backwards compatibility.  The separate parameters <A HREF="node97.html#MP:GAP"><TT>GAP</TT></A>, <A HREF="node149.html#MP:PRESTART"><TT>PRESTART</TT></A>, and
<A HREF="node117.html#MP:MINPAUSE"><TT>MINPAUSE</TT></A> are really better suited to
achieve the desired results. Note that any intervals specified with
<TT>PRESCAN</TT> and the newer parameters will be added.

<P>
</LI>
</UL>

<P>
The above schemes set the times of the scans as reported in the output
files meant for human consumption.  But the telescope control files
actually give the times for the recording to start and stop.  There
are two additional parameters that can affect the recording start
time.  They are <A HREF="node149.html#MP:PRESTART"><TT>PRESTART</TT></A>, and
<A HREF="node117.html#MP:MINPAUSE"><TT>MINPAUSE</TT></A>.  You may want the recording
start time to differ from the scan start time to make correlation
proceed more robustly.  If the recordings are started somewhat before
the scan start time, the chances that they will be synced up on
playback by the time of the scan start time are enhanced.
<A HREF="node149.html#MP:PRESTART"><TT>PRESTART</TT></A> can be used to request that the
be started the requested amount of time (record time) before the scan
start time.  If that time is earlier than the previous stop time, the
recording will be left running.

<P>
The time required to sync tapes on the VLBA correlator are about
empirically 8, 13, and 25 seconds for speedup factors 1, 2 and 4
respectively (ie, about 8 seconds in correlator wall clock time).  As
of early May 2005, disk recordings (Mark5) take about 10 seconds
longer (recording time).  It is expected that disk sync times will
drop drastically as the system is shaken out -- hopefully to on the
order of a second or two.  The sync times for tape at JIVE are about
20 seconds with values down to 10 seconds if there is only a short gap
between scans.  The sync times for disk at JIVE are about 10s while
for Bonn and Haystack, it is around 1 second.  The non-VLBA correlator
times are not dependent on the speedup factor (they don't speed up
playback).

<P>
The extreme, and often useful, case of a pre-start is to not stop
recording between scans.  This is especially useful if you have many
short scans with short intervals between them.  <A HREF="node117.html#MP:MINPAUSE"><TT>MINPAUSE</TT></A> sets the smallest gap between scans for which
the recording will be stopped.  If the gap is smaller, the recording
will be left running.  <TT>MINPAUSE</TT> is in units of playback time, so
it is multiplied by the speed up factor to get the effect at record
time.

<P>
<TT>PRESTART</TT> is applied before <TT>MINPAUSE</TT>.  First the recording
start time is shifted earlier, then the interval from the last
stop time is examined to determine if the recording should be left
running.  The defaults of <TT>PRESTART=0, MINPAUSE=8</TT> should
be ok in most situations.  Users should not need to worry about
these parameters most of the time.  The offset of the recording start
time from the scan start time can be displayed in the summary
file by adding <TT>PTSTART</TT> to the arguments of <A HREF="node174.html#MP:SUMITEM"><TT>SUMITEM</TT></A>.

<P>
A factor to consider when planning scan times is formatter
reconfigurations.  These happen when the internal switching and setup
of the formatter at the station has to be changed.  This happens when
there are changes in any of a number of parameters including the
number of channels, the sample rate, the BBC assignments, the BBC
sidebands, and the pulse cal detector setup.  A formatter
reconfiguration takes about 20 seconds and during that time the
formatter is not sending valid time codes to the recorder.  If this
happens during recording, it knocks the correlator out of sync for
both the duration of the reconfigure plus the time to resync.  In
practice, it also seems to confuse the VLBA correlator somehow for
maybe one or two stations and they can take over a minute to resync.
It is best to avoid reconfigurations if possible.  In the rare cases
where that is not possible, try to provide a gap between scans of
sufficient length to do the reconfiguration (note that the formatter
configuration requested during a gap is the same as that during the
following scan, so this only requires using the <A HREF="node97.html#MP:GAP"><TT>GAP</TT></A> command (or any other mechanism for having one scan
start a while after another ends).  Note that common reasons that
reconfigurations occur in schedules are changes in the sample rate,
changes in the BBC sideband (remember for net upper sideband, the 20cm
and 13cm systems on the VLBA use lower sideband at the BBC), and
changes in the kHz part of the frequency which changes the pcal
detector frequency (changes in the MHz part will not change the pcal
setup and will not trigger a reconfigure).

<P>
The date specification for a scan is for the scan stop time,
regardless of how the scan times are specified.  If there is a scan
that crosses midnight, this can cause some confusion, especially if it
is the first scan of the experiment and the date is being specified
along with <A HREF="node171.html#MP:START"><TT>START</TT></A>.  If a schedule crosses a
day boundary and <TT>START</TT> or <TT>STOP</TT> times are being specified,
the new day should be specified.  However, if midnight is crossed
during any form of duration scheduling, the day will be incremented
automatically.

<P>
All scans for a given station must be specified in time order.
However, it is not necessary for scans for different stations to be in
time order.  This allows, for example, for the scans for one antenna
to be specified separately from the scans for another antenna.  While
this works, it is not recommended bacause SCHED&nbsp; does not try to
identify scans that can be correlated together.  Anything that depends
on knowing what the whole array is doing is likely to fail.  Dwell
time scheduling is one such item because SCHED&nbsp; must know how long
the slews are for all antennas in a scan.  Plotting of u-v coverage is
another because SCHED&nbsp; only plots u-v points for baselines between
antennas in the same scan.  The estimates of data volumes and rates
from the correlator, given in the summary file, are yet another
because they depend on counts of baselines.  Finally, any VEX file
produced in such a way is likely to cause problems at a correlator
that depends on it (not the VLBA correlator).

<P>
SCHED&nbsp; allows sidereal time scheduling by means of the <A HREF="node115.html#MP:LST"><TT>LST</TT></A>.  For VLBI, the concept of LST needs a bit more
specification since it is different for each element of the array.
<TT>LST</TT> can take an argument which is the station whose LST is to be
used.  If there is no argument, that station is assumed to be the VLA
since LST scheduling was most commonly used for VLA schedules when
the capability was first added to SCHED.  Now that dynamic scheduling
is being used on the VLBA, many users will want to set
<TT>LST=VLBA_PT</TT> to conform to the style of scheduling requested
for such projects.

<P>
If <A HREF="node115.html#MP:LST"><TT>LST</TT></A> is specified, there are two ways to set
the date.  With the original method, the year and month are ignored
and the day is assumed to be the (modified?) julian sidereal day
number.  One way to determine what this number is to find a VLA
schedule and read it off the side.  Another is to make a dummy run of
SCHED&nbsp; with the VLA as a station and look at the fifth line in the
<I>exptobs.y</I> file where the day is specified as the ``Observation
day''.  For comparison, LST day 56789 was 1995 Dec. 12.  Of course the
LST day increments at a slightly different rate that the UT day.
The second method is to specify the UT day in the usual manner.
SCHED&nbsp; will attempt to figure out the LST day number, taking into
account the fact that 0 hours LST is sometime in the middle of
the UT day.  It will also check if your start time is in the
approximately 3.9 minutes where the result is ambiguous (LST days
are shorter than UT days) and request specification of the LST
day number -- giving you the options.

<P>
If sidereal time scheduling is requested, most times and durations are
assumed to be in sidereal units.  Some exceptions are <TT>PRESCAN</TT> and
<TT>MINPAUSE</TT>.

<P>
It is a very good idea, when using LST scheduling, to check the
final output schedules, which are all in UT, to be sure that they
are for the right day.

<P>
The trickiest part of setting scan times is probably getting tape
management right when automatic tape handling is not being
used.  Please see the section on <A HREF="node19.html#SSEC:TAPEMANAGEMENT">tape management</A> for details on how to
deal with this.  Disk recordings always use the equivalent of automatic
tape handling

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html465"
  HREF="node18.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html461"
  HREF="node15.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html455"
  HREF="node16.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html463"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html466"
  HREF="node18.html">Dynamic Scheduling</A>
<B> Up:</B> <A NAME="tex2html462"
  HREF="node15.html">Scheduling Tips</A>
<B> Previous:</B> <A NAME="tex2html456"
  HREF="node16.html">Observing Strategy</A>
 &nbsp <B>  <A NAME="tex2html464"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Craig Walker
2005-06-29
</ADDRESS>
</BODY>
</HTML>
