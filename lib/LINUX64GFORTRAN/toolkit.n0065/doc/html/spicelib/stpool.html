
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>stpool</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>stpool</b> </td>
    </tr>

    <tr>
      <td style="vertical-align: top;">

<small><div align="center">
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div></small>
       <br>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
            <small>
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Examples">Examples<br></a>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
             </small>
            </td>
          </tr>
        </tbody>
</table>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
      STPOOL ( String from pool )
 
      SUBROUTINE STPOOL ( ITEM, NTH, CONTIN, STRING, SIZE, FOUND )
 
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Retrieve the NTH string from the kernel pool variable,
     where the string may be continued across several components
     of the kernel pool variable.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
      None.
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
      <a href="pool.html">POOL</a>
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
 
      IMPLICIT NONE
      CHARACTER*(*)         ITEM
      INTEGER               NTH
      CHARACTER*(*)         CONTIN
      CHARACTER*(*)         STRING
      INTEGER               SIZE
      LOGICAL               FOUND
 
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     VARIABLE  I/O  DESCRIPTION
     --------  ---  --------------------------------------------------
     ITEM       I   name of the kernel pool variable
     NTH        I   index of the full component to retrieve
     CONTIN     I   character sequence used to indicate continuation
     STRING     O   a full string concatenated across continuations
     SIZE       O   the number of character in the full string value
     FOUND      O   flag indicating success or failure of request
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     ITEM       is the name of a kernel pool variable for which
                the caller wants to retrieve a full (potentially
                continued) string component.


     NTH        is the number of the component to retrieve from
                the kernel pool.

     CONTIN     is a sequence of characters which (if they appear as
                the last non-blank sequence of characters in a
                component of a value of a kernel pool variable)
                indicate that the string associated with the
                component is continued into the next literal
                component of the kernel pool variable.

                If CONTIN is blank, all of the components of ITEM
                will be retrieved as a single string.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     STRING     is the NTH full string associated with the kernel
                pool variable specified by ITEM.

                Note that if STRING is not sufficiently long to hold
                the fully continued string, the value will be
                truncated.  You can determine if STRING has been
                truncated by examining the variable SIZE.

     SIZE       is the index of last non-blank character of
                continued string as it is represented in the
                kernel pool.  This is the actual number of characters
                needed to hold the requested string.  If STRING
                contains a truncated portion of the full string,
                <a href="rtrim.html">RTRIM</a>(STRING) will be less than SIZE.

                If the value of STRING should be a blank, then
                SIZE will be set to 1.

     FOUND      is a logical variable indicating success of the
                request to retrieve the NTH string associated
                with ITEM.  If an NTH string exists,
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1) If the variable specified by ITEM is not present in the
        kernel pool or is present but is not character valued,
        STRING will be returned as a blank, SIZE will be
        returned with the value 0 and FOUND will be set to .FALSE. In
        particular if NTH is less than 1, STRING will be returned as a
        blank, SIZE will be zero and FOUND will be FALSE.

     2) If the variable specified has a blank string associated
        with its NTH full string, STRING will be blank, SIZE
        will be 1 and FOUND will be set to .TRUE.

     3) If STRING is not long enough to hold all of the characters
        associated with the NTH string, it will be truncated on the
        right.

     4) If the continuation character is a blank, every component
        of the variable specified by ITEM will be inserted into
        the output string.

     5) If the continuation character is blank, then a blank component
        of a variable is treated as a component with no letters.
        For example:

           STRINGS = ( 'This is a variable'
                       'with a blank'
                       ' '
                       'component.' )

        Is equivalent to


           STRINGS = ( 'This is a variable'
                       'with a blank'
                       'component.' )

        from the point of view of <b>STPOOL</b> if CONTIN is set to the
        blank character.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     The SPICE Kernel Pool provides a very convenient interface
     for supplying both numeric and textual data to user application
     programs.  However, any particular component of a character
     valued component of a kernel pool variable is limited to 80
     or fewer characters in length.

     This routine allows you to overcome this limitation by
     &quot;continuing&quot; a character component of a kernel pool variable.
     To do this you need to select a continuation sequence
     of characters and then insert this sequence as the last non-blank
     set of characters that make up the portion of the component
     that should be continued.

     For example, you may decide to use the sequence '//' to indicate
     that a string should be continued to the next component of
     a kernel pool variable.   Then set up the
     kernel pool variable as shown below

     LONG_STRINGS = ( 'This is part of the first component //'
                      'that needs more than one line when //'
                      'inserting it into the kernel pool.'
                      'This is the second string that is split //'
                      'up as several components of a kernel pool //'
                      'variable.' )

     When loaded into the kernel pool, the variable LONG_STRINGS
     will have six literal components:

        COMPONENT (1) = 'This is part of the first component //'
        COMPONENT (2) = 'that needs more than one line when //'
        COMPONENT (3) = 'inserting it into the kernel pool.'
        COMPONENT (4) = 'This is the second string that is split //'
        COMPONENT (5) = 'up as several components of a kernel pool //'
        COMPONENT (6) = 'variable.'

     These are the components that would be retrieved by the call

        CALL <a href="gcpool.html">GCPOOL</a> ( 'LONG_STRINGS', 1, 6, N, COMPONENT, FOUND )

     However, using the routine <b>STPOOL</b> you can view the variable
     LONG_STRINGS as having two long components.

        STRING (1) = 'This is part of the first component that '
    .   //           'needs more than one line when inserting '
    .   //           'it into the kernel pool. '

        STRING (2) = 'This is the second string that is split '
    .   //           'up as several components of a kernel pool '
    .   //           'variable. '


     These string components would be retrieved by the following two
     calls.

        CALL <b>STPOOL</b> ( 'LONG_STRINGS, 1, '//', STRING(1), SIZE, FOUND )
        CALL <b>STPOOL</b> ( 'LONG_STRINGS, 2, '//', STRING(2), SIZE, FOUND )
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     Example 1.  Retrieving file names.

     Suppose a you have used the kernel pool as a mechanism for
     specifying SPK files to load at startup but that the full
     names of the files are too long to be contained in a single
     text line of a kernel pool assignment.

     By selecting an appropriate continuation character ('*' for
     example)  you can insert the full names of the SPK files
     into the kernel pool and then retrieve them using this
     routine.

     First set up the kernel pool specification of the strings
     as shown here:

           SPK_FILES = ( 'this_is_the_full_path_specification_*'
                         'of_a_file_with_a_long_name'
                         'this_is_the_full_path_specification_*'
                         'of_a_second_file_with_a_very_long_*'
                         'name' )

     Now to retrieve and load the SPK_FILES one at a time,
     exercise the following loop.

     INTEGER               FILSIZ
     PARAMETER           ( FILSIZ = 255 )

     CHARACTER*(FILSIZ)    FILE
     INTEGER               I

     I = 1

     CALL <b>STPOOL</b> ( 'SPK_FILES', I, '*', FILE, SIZE, FOUND )

     DO WHILE ( FOUND .AND. <a href="rtrim.html">RTRIM</a>(FILE) .EQ. SIZE )

        CALL <a href="spklef.html">SPKLEF</a> ( FILE, HANDLE )
        I = I + 1
        CALL <b>STPOOL</b> ( 'SPK_FILES', I, '*', FILE, SIZE, FOUND )
     END DO

     IF ( FOUND .AND. <a href="rtrim.html">RTRIM</a>(FILE) .NE. SIZE ) THEN
        WRITE (*,*) 'The ', I, '''th file name was too long.'
     END IF


     Example 2. Retrieving all components as a string.


     Occasionally, it may be useful to retrieve the entire
     contents of a kernel pool variable as a single string.  To
     do this you can use the blank character as the
     continuation character.  For example if you place the
     following assignment in a text kernel

         COMMENT = (  'This is a long note '
                      ' about the intended '
                      ' use of this text kernel that '
                      ' can be retrieved at run time.' )

     you can retrieve COMMENT as single string via the call below.

        CALL <b>STPOOL</b> ( 'COMMENT', 1, ' ', COMMNT, SIZE, FOUND )

     The result will be that COMMNT will have the following value.

        COMMNT = 'This is a long note about the intended use of '
    .   //       'this text kernel that can be retrieved at run '
    .   //       'time. '

     Note that the leading blanks of each component of COMMENT are
     significant, trailing blanks are not significant.

     If COMMENT had been set as

         COMMENT = (  'This is a long note '
                      'about the intended '
                      'use of this text kernel that '
                      'can be retrieved at run time.' )

     Then the call to <b>STPOOL</b> above would have resulted in several
     words being run together as shown below.


        COMMNT = 'This is a long noteabout the intendeduse of '
    .   //       'this text kernel thatcan be retrieved at run '
    .   //       'time. '


     resulted in several words being run together as shown below.
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     W.L. Taber      (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 1.0.0, 11-JUL-1997 (WLT)</PRE>
<h4>Link to routine STPOOL source file <a href='../../../src/spicelib/stpool.f'>stpool.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Tue Jul 15 14:25:12 2014</pre>

</body>
</html>

