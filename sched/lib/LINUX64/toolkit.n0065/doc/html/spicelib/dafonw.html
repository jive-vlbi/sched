
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>dafonw</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>dafonw</b> </td>
    </tr>

    <tr>
      <td style="vertical-align: top;">

<small><div align="center">
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div></small>
       <br>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
            <small>
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Examples">Examples<br></a>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
             </small>
            </td>
          </tr>
        </tbody>
</table>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
 DAFONW ( DAF, open new )

      ENTRY DAFONW ( FNAME, FTYPE, ND, NI, IFNAME, RESV, HANDLE )
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Open a new DAF for subsequent write requests.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/daf.html">DAF</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     DAF
     FILES
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
     CHARACTER*(*)         FNAME
     CHARACTER*(*)         FTYPE
     INTEGER               ND
     INTEGER               NI
     CHARACTER*(*)         IFNAME
     INTEGER               RESV
     INTEGER               HANDLE
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     Variable  I/O  Description
     --------  ---  --------------------------------------------------
     FNAME      I   Name of DAF to be opened.
     FTYPE      I   Mnemonic code for type of data in the DAF file.
     ND         I   Number of double precision components in summaries.
     NI         I   Number of integer components in summaries.
     IFNAME     I   Internal file name.
     RESV       I   Number of records to reserve.
     HANDLE     O   Handle assigned to DAF.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     FNAME       is the name of a new DAF to be created (and
                 consequently opened for write access).

     FTYPE       is a code for type of data placed into a DAF file.
                 The first nonblank character and the three (3)
                 characters immediately following it, giving four (4)
                 characters, are used to represent the type of the data
                 placed in the DAF file. This is provided as a
                 convenience for higher level software. It is an error
                 if this string is blank. When written to the DAF file,
                 the value for the type IS case sensitive; what you put
                 in is what you get out, so be careful.

                 NAIF has reserved for its own use file types
                 consisting of the upper case letters (A-Z) and the
                 digits 0-9. NAIF recommends lower case or mixed case
                 file types be used by all others in order to avoid
                 any conflicts with NAIF file types.

     ND          is the number of double precision components
                 in each array summary of the new file.

     NI          is the number of integer components in each
                 array summary in the new file.

     IFNAME      is the internal file name (containing as many as 60
                 characters) for the new file. This should uniquely
                 identify the file.

     RESV        is the number of records in the new file to be
                 reserved; these records will not be used to store any
                 data belonging to DAF arrays subsequently written to
                 the file. The user may reserve records 2 through (2 +
                 RESV - 1) in the file. SPICE kernels based on the DAF
                 format use the reserved record area to store optional
                 textual information; for these kernels, the reserved
                 records contain the file's &quot;comment area.&quot;

                 When RESV is non-zero, this routine writes an
                 end-of-comments character into the first byte of
                 record 2, and fills the rest of the allocated records
                 will null (ASCII code 0) characters.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     HANDLE      is the file handle associated with the file. This
                 handle is used to identify the file in subsequent
                 calls to other DAF routines.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     INTEOC      is the ASCII decimal integer code of the character
                 recognized by SPICE as representing the end of the
                 comment data in the reserved record area.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1) If the specified file cannot be opened without exceeding
        the maximum number of files, the error SPICE(DAFFTFULL)
        is signalled.

     2) If the input argument ND is out of the range [0, 124]
        or if NI is out of the range [2, 250], the error
        SPICE(DAFINVALIDPARAMS) is signalled.

     3) If

           ND + ( NI + 1 ) / 2   &gt;  125

        the error SPICE(DAFINVALIDPARAMS) is signalled.

     4) If the number of records to be reserved is not zero or
        positive, the error SPICE(DAFNORESV) is signalled.

     5) If an I/O error occurs in the process of creating the file,
        routines in the call tree of this routine signal an error.

     6) If (for some reason) the initial records in the file cannot
        be written, the error SPICE(DAFWRITEFAIL) is signalled.

     7) If no logical units are available, the error is
        signaled by routines called by this routine.

     8) If the file name is blank or otherwise inappropriate
        routines in the call tree of this routine signal an error.

     9) If the file type is blank, the error SPICE(BLANKFILETYPE)
        is signalled.

     10) If the file type contains nonprinting characters, decimal
         0-31 and 127-255, the error SPICE(ILLEGALCHARACTER) is
         signalled.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     See argument FNAME.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     This routine supersedes <a href="dafopn.html">DAFOPN</a> as the method for opening a new DAF
     file. It includes a data type identifier as part of the ID word of
     a DAF file it creates.

     The DAFs created by <b>DAFONW</b> have initialized file records but
     do not yet contain any arrays.  See the DAF Required Reading
     for a discussion of file records.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     In the following code fragment, <b>DAFONW</b> is used to open a file,
     to which a new array is then added. This file will have the data
     type 'TEST' which may be used to distinguish production data from
     test data at a user subroutine level.

        FNAME = 'test.bin'
        FTYPE = 'TEST'

        CALL <b>DAFONW</b>   ( FNAME, FTYPE,  ND,  NI,  IFNAME, 0, HANDLE )

        CALL <a href="dafbna.html">DAFBNA</a>   ( HANDLE, SUM, NAME  )
        CALL GET_DATA ( DATA,   N,   FOUND )

        DO WHILE ( FOUND )
           CALL <a href="dafada.html">DAFADA</a>   ( DATA, N        )
           CALL GET_DATA ( DATA, N, FOUND )
        END DO

        CALL <a href="dafena.html">DAFENA</a>
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     1) Files opened using this routine must be closed with <a href="dafcls.html">DAFCLS</a>.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     K.R. Gehringer  (JPL)
     N.J. Bachman    (JPL)
     J.M. Lynch      (JPL)
     H.A. Neilan     (JPL)
     W.L. Taber      (JPL)
     F.S. Turner     (JPL)
     I.M. Underwood  (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 9.0.1, 10-OCT-2012 (EDW)

        Corrected ordering of header section.

        Removed the obsolete Reference citation to &quot;NAIF
        Document 167.0.&quot;

    SPICELIB Version 9.0.0, 09-NOV-2006 (NJB)

        <b>DAFONW</b> now writes a EOC character to the first byte
        of the second record when NRESV &gt; 0.

    SPICELIB Version 8.1.0, 02-APR-2002 (FST)

        This routine was updated to accomodate changes to the
        handle manager interface.  See <a href="dafah.html">DAFAH</a>'s Revision section
        for details.

    SPICELIB Version 8.0.0, 13-NOV-2001 (FST)

        This routine was updated to utilize the new handle manager
        software to manage binary file formats and consolidated
        I/O code.

    SPICELIB Version 7.0.4, 08-OCT-1999 (WLT)

        The environment lines were expanded so that the supported
        environments are now explicitely given.  New
        environments are WIN-NT

    SPICELIB Version 7.0.3, 16-SEP-1999 (NJB)

        CSPICE environments were added.  Some typos were corrected.

    SPICELIB Version 7.0.2, 28-JUL-1999 (WLT)

        The environment lines were expanded so that the supported
        environments are now explicitly given.  New
        environments are PC-DIGITAL, SGI-O32 and SGI-N32.

    SPICELIB Version 7.0.1, 17-MAR-1999 (WLT)

        The environment lines were expanded so that the supported
        environments are now explicitly given.  Previously,
        environments such as SUN-SUNOS and SUN-SOLARIS were implied
        by the environment label SUN.

    SPICELIB Version 2.0.0, 03-MAR-1999 (FST)

        The entry point was modified to insert the FTP validation
        string, as well as the binary file format into the file record.

    SPICELIB Version 1.1.0, 08-MAR-1996 (KRG)

        The modifications support the notion of a DAF comment area,
        and involve writing NULL filled reserved records when the
        number of reserved records is greater than zero (0).

        Some nested IF...THEN...ELSE IF...THEN...END IF constructs
        were expanded to be independent IF...THEN...END IF tests.
        The tests were for IOSTAT errors on cascading write statements
        nested in the IF...ELSE IF... statements, and this was
        confusing. These tests were restructured so that IOSTAT is
        tested after each write statement which is equicalent to the
        original intent and easier to read.

    SPICELIB Version 1.0.0, 29-SEP-1993 (KRG)

        This routine implements the notion of a file type for DAF
        files. It allows type information to be added to the file ID
        word.

        This routine is a modified version of <a href="dafopn.html">DAFOPN</a>. See the revision
        history of that entry point for details of changes before the
        creation of this entry point.</PRE>
<h4>Link to routine DAFONW source file <a href='../../../src/spicelib/dafah.f'>dafah.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Tue Jul 15 14:24:04 2014</pre>

</body>
</html>

