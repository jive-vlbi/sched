
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>ttrans</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>ttrans</b> </td>
    </tr>

    <tr>
      <td style="vertical-align: top;">

<small><div align="center">
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div></small>
       <br>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
            <small>
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Examples">Examples<br></a>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
             </small>
            </td>
          </tr>
        </tbody>
</table>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
      TTRANS ( Time transformation )
 
      SUBROUTINE TTRANS ( FROM, TO, TVEC )
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Transform a time vector from one representation and system
     to another.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/time.html">TIME</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     PARSING
     TIME
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
 
      IMPLICIT NONE
 
      INCLUDE               'zzctr.inc'

      INTEGER               MXCOMP
      PARAMETER           ( MXCOMP = 10 )
 
      CHARACTER*(*)         FROM
      CHARACTER*(*)         TO
      DOUBLE PRECISION      TVEC ( MXCOMP )
 
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     Variable  I/O  Description
     --------  ---  --------------------------------------------------
     MXCOMP     P    maximum number of components allowed for TVEC.
     TO         I    description of a time vector.
     FROM       I    description of a time vector.
     TVEC      I/O   time vector representing an epoch.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     TVEC       is called a time vector.  It is an array of double
                precision numbers that represent some epoch.  To
                determine its meaning you must examine the string
                FROM.  Note that the number of significant entries
                in TVEC is implied by FROM.

     FROM       is a string used to describe the type of time vector
     TO         TVEC.  FROM is the type of the input vector TVEC
                TO is the type of the output TVEC

                The interpretation of TVEC  is as follows:

                TYPE      Interpretation of TVEC
                ------    -------------------------------------------
                YMD(F)  - year, month, day,   hour, minutes, seconds
                YD(F)   - year,  day-of-year, hour, minutes, seconds
                YD.D(F) - year, number of days past beginning of year
                DAYSEC  - calendar days past 1 jan 1 AD,
                          seconds past beg day
                DP2000  - calendar days past 1 jan 2000,
                          seconds past beg day
                JDUTC   - julian date UTC.
                FORMAL  - seconds in the formal calendar since J2000.
                YWD(F)  - year, week, day, hour, minutes, seconds
                YMWD(F) - year, month, week, day, hour, minutes,
                          seconds
                TAI     - atomic seconds past Atomic J2000.
                TDT     - Terrestrial Dynamical Time
                TDB     - Barycentric Dynamical Time
                JED     - Julian Ephemeris Date (based on TDB)
                ET      - Ephemeris time (same as TDB)
                JDTDB   - Julian Date based on TDB (same as JED)
                JDTDT   - Julian Date based on TDT

                The number of components of TVEC implied by TYPE is
                as follows:

                   YMD     - 6
                   YD      - 5
                   JDUTC   - 1
                   FORMAL  - 1
                   YD.D    - 2
                   DAYSEC  - 2
                   DP2000  - 2
                   YWD     - 6
                   YMWD    - 7
                   TAI     - 1
                   TDT     - 1
                   TDB     - 1
                   JED     - 1
                   ET      - 1
                   JDTDB   - 1
                   JDTDT   - 1


                For all types, only the last component of the
                time vector may be non-integer.  If other components
                have fractional parts only their truncated integer
                components will be recognized.

                YMD and YD

                   These types are assumed to be different
                   representations on UTC time markers.  Thus
                   the hour, minutes and seconds portions all
                   represent time elapsed
                   since the beginning of a day.  As such the
                   seconds portion of HMS may range up to (but
                   not include) 61 on days when positive leap
                   seconds occur and may range up to (but not
                   include) 59 on days during which negative
                   leapseconds occur.

                YD.D type.

                   Y is the calendar year used in civil time keeping
                   D is the day of the calendar year --- for any time
                     during the first of January, the integer portion
                     of the day will be 1.

                     The fractional portion is the fractional part of
                     the specific day.  Thus the amount of time
                     specified by the fractional portion of the day
                     depends upon whether or not the day has a leap
                     second.  &quot;.D&quot; can be computed from the formula

                           number of seconds past beginning of day
                     .D = ---------------------------------------
                              number of UTC seconds in the day.

                FORMAL type.

                   The FORMAL type for TVEC gives the number of
                   seconds past the epoch J2000 (noon Jan 1 2000)
                   on the formal calendar (no leap seconds ---
                   all days contain 86400 seconds)  The formal clock
                   is simply held still for one second during
                   positive leap seconds.  Times during leap seconds
                   cannot be represented in this system.

                   This system is converted internally to a
                   calendar days past epoch and seconds
                   past beginning of day form.  For this reason,
                   times that occur during a positive leap second
                   can never be represented.  Moreover, if a negative
                   leapsecond occurs, times that occur during the
                   ``missing'' leapsecond will simply be placed
                   at the beginning of the next day.  Thus two
                   different FORMAL times can represent the
                   same time around a negative leap second.

                   FORMAL time is equivalent to somewhat parochial
                   ``UTC seconds past J2000'' that is produced
                   by the SPICE routine <a href="tparse.html">TPARSE</a>.

                JDUTC type.

                   This system is similar to the FORMAL system
                   described above.  All days are assumed to have
                   86400 seconds.  All numbers of the form

                      integer + 0.5

                   fall at the beginning of calendar UTC days.

                   There is no way to represent times during a
                   positive leapsecond. Times during missing
                   negative leap seconds are represented in two ways.

                DAYSEC type.

                   This time vector has the form of calendar
                   days since January 1, of the year 1 A.D.
                   and number of seconds past the beginning of the
                   calendar day.
                   (January 2 of the year 1 A.D. is 1 calendar
                   day past January 1, 1 A.D.)

                DP2000 type.

                   This time vector has the same form as DAYSEC
                   time vectors.  The only difference is that
                   the reference epoch is JAN 1, 2000.

                YWD and YMWD types.

                   These time vectors are used to specify a time
                   that are most conveniently expressed by phrases
                   such as ``the third Monday of every month'' or
                   ``Beginning with the second Wednesday of the new
                     year and every 4th Wednesday thereafter.''

                   The hours, minutes and seconds components of
                   these time vectors are the
                   same as for the Year-Month-Day and Year-Day UTC
                   time vectors.

                   The Y component refers to the calendar year, and
                   in the YMWD vector, the M component refers to
                   the calendar month.

                   The W component refers to the week of the
                   Year (YWD) or Month (YMWD).  The first week
                   begins on the first day of the year or the first
                   day of the month.  The D component is the day of the
                   week with 1 corresponding to Sunday, 2 to Monday,
                   and so on with 7 corresponding to Saturday.

                   Thus the YMWD time vector

                      1991
                        11
                         3
                         5
                        12
                         0
                         0

                   refers to 12:00:00 on the third Thursday of
                   November of 1991.

                   The YWD time vector

                      1997
                        11
                         4
                        13
                         5
                        11

                   refers to 12:05:11 on the eleventh Wednesday
                   of 1997.

                Formal Calendar Time Vectors
                ============================
                The types YMDF, YDF, YD.D(F), YWDF, YMWDF are similar
                to the corresponding base types: YMD, YD, YD.D, YWD
                and YMWD.  However, these types represent formal
                time vectors.  Each day contains exactly 86400 seconds.
                The difference between formal and non-formal systems
                can only be seen during a positive leapsecond or
                during the second following a negative leapsecond.

                Epochs during a positive leapsecond on input are
                placed in the first second of the next day.  Epochs
                during a positive leapsecond on output are held
                at 00:00:00 of the next day.

                Epochs during the first second following a negative
                leapsecond are counted as belonging to the previous
                day if both the input and output types are formal
                types.


                Calendars
                =====================
                In all time vectors for which a year is specified,
                the year is assumed to belong to the Gregorian
                Calendar---every 4th year is a leapyear except
                for centuries (such as 1900) that are not divisible
                by 400.  This calendar is formally extended
                indefinitely backward and forward in time.

                Note that the Gregorian Calendar did not
                formally exist prior to October 15, 1582. Prior to
                that time the Julian Calendar was used (in the
                Julian Calendar every 4th year is a leapyear, including
                all centuries).

                If you have epochs relative to the Julian calendar,
                the SPICE routine <a href="jul2gr.html">JUL2GR</a> is available for converting
                to the formal Gregorian Calendar.


                Epochs Prior to 1972
                =====================
                UTC as it exists today, was adopted in 1972.  For
                epochs prior to 1972, it is assumed that the difference
                between TAI and UTC is a constant value.

                Years prior to 1 A.D.
                =====================
                A year belonging to the B.C. era,  may be
                represented by subtracting the year from 1.
                Thus to specify 27 B.C (Gregorian) set the
                year component of the time vector to -26.


                Notes:
                ======
                The FORMAL and JDUTC types should not be used
                for times near a leap second.  However, for times
                removed from leap seconds they pose no problems.

                The DAYSEC and DP2000 are useful for representing
                times that are given in atomic seconds past some
                reference epoch other than J2000.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     TVEC       is the time vector corresponding to the input
                time vector but with components consistent with
                the type specified by input variable TO.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     MXCOMP     is the maximum number of components that can appear in
                TVEC.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1) If the type of either FROM or TO is not recognized the
        error 'SPICE(UNKNONWNTIMESYSTEM)' is signalled.

     2) If a leapseconds kernel has not been loaded prior a call
        to <b>TTRANS</b> the error  'SPICE(NOLEAPSECONDS)' is signalled.

     3) If epochs associated with leapseconds in the leapseconds
        kernel are not in increasing order, the error
        'SPICE(BADLEAPSECONDS)' is signalled.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     This routine is the fundamental translator between various
     representations of time in the SPICE system.  However, it
     is intended to be a mid-level routine that few user's should
     have need of calling.

     In addition to translating between time systems, this routine
     can be used to normalize the components of a time string
     so that they are in the normal range for a particular
     representation.  This allows you to easily do arithmetic
     with epochs.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     Suppose you need to convert a time expressed as seconds
     past J2000 (TDB) to Pacific Daylight time.  The following
     example shows how you might use <b>TTRANS</b> to accomplish this
     task.

      TVEC(1) = ET

      CALL <b>TTRANS</b> ( 'TDB', 'YMD', TVEC )

      The seconds component of PDT is the same as the seconds
      component of UTC.  We save and add the UTC-PDT offset
      to the hours and minutes component of the time vector.

      SECNDS  = TVEC(6)
      TVEC(6) = 0.0D0

      TVEC(4) = TVEC(4) - 7.0D0
      TVEC(5) = TVEC(5) + 0.0D0

      CALL <b>TTRANS</b> ( 'YMDF', 'YMDF', TVEC )

      Now reset the seconds component to the original value
      and pass the time vector to some formatting routine.

      TVEC(6) = SECNDS
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     N.J. Bachman   (JPL)
     W.L. Taber     (JPL)
     B.V. Semenov   (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 1.5.0, 09-SEP-2013 (BVS)

        Updated to keep track of the <a href="pool.html">POOL</a> counter and call ZZCVPOOL.

    SPICELIB Version 1.4.0, 05-MAR-2009 (NJB)

        Bug fix: this routine now keeps track of whether its
        kernel pool look-up succeeded. If not, a kernel pool
        lookup is attempted on the next call to this routine.

    SPICELIB Version 1.3.0, 15-NOV-2006 (NJB)

        A reference to <a href="rtpool.html">RTPOOL</a> was replaced by a reference
        to <a href="gdpool.html">GDPOOL</a>.

    SPICELIB Version 1.2.0, 24-OCT-2005 (NJB)

        Updated to remove non-standard use of duplicate arguments
        in <a href="rmaind.html">RMAIND</a> and <a href="rmaini.html">RMAINI</a> calls.  Changed reference to <a href="ldpool.html">LDPOOL</a> to
        reference to <a href="furnsh.html">FURNSH</a> in an error message.

    SPICELIB Version 1.1.0, 9-JUN-1999 (WLT)

        The routine was modified so that uniform time system
        transformations (see <a href="unitim.html">UNITIM</a>) are handled without
        performing intermediate computations.  This gives a slight
        improvement in the accuracy of some computations.

        In addition, two unused variables were removed.

    Spicelib Version 1.0.0, 17-SEP-1996 (WLT)</PRE>
<h4>Link to routine TTRANS source file <a href='../../../src/spicelib/ttrans.f'>ttrans.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Tue Jul 15 14:25:20 2014</pre>

</body>
</html>

