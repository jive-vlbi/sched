
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>spcac</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>spcac</b> </td>
    </tr>

    <tr>
      <td style="vertical-align: top;">

<small><div align="center">
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div></small>
       <br>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
            <small>
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Examples">Examples<br></a>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
             </small>
            </td>
          </tr>
        </tbody>
</table>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
 SPCAC ( SPK and CK, add comments )
 
      SUBROUTINE SPCAC ( HANDLE, UNIT, BMARK, EMARK )
 
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Store text from a text file in the comment area of a binary SPK
     or CK file, appending it to whatever text may already have
     been stored there.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/spc.html">SPC</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     FILES
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
 
      INTEGER               HANDLE
      INTEGER               UNIT
      CHARACTER*(*)         BMARK
      CHARACTER*(*)         EMARK
 
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     Variable  I/O  Description
     --------  ---  --------------------------------------------------
     HANDLE     I   Handle assigned to binary SPK or CK file.
     UNIT       I   Logical unit connected to comment file.
     BMARK      I   Beginning marker.
     EMARK      I   Ending marker.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     HANDLE      is the handle assigned to the binary SPK or CK file
                 which has been opened for write access.

     UNIT        is the logical unit connected to the text file
                 which contains the text to be stored in the
                 comment area of the binary file.

     BMARK,
     EMARK       are markers that delimit a group of consecutive
                 lines in the text file (UNIT), that get stored in the
                 comment area of the binary file (HANDLE).

                 The group of lines begins with the line that
                 immediately follows the first line of the file
                 equivalent to BMARK.  It ends with line that
                 precedes the next line of the file equivalent to
                 EMARK, including blank lines.  Leading and
                 trailing blanks are ignored when testing for
                 equivalence.

                 By convention, if BMARK is blank, the first line of
                 the group is the first line of the file; if EMARK is
                 blank, the last line of the group is the last line
                 of the file.

                 If a marker is non-blank and is not found, or if
                 non-blank markers are on successive lines in the text
                 file, nothing gets stored in the comment area of
                 the binary file.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1) If the specified DAF file is not open for write access, the
        error will be diagnosed by a routine called by this routine.

     2) If there is a problem reading from the comment area of the
        binary file, the error SPICE(FILEREADFAILED) is signalled.

     3) If there is a problem writing to the comment area of the
        binary file, the error SPICE(FILEWRITEFAILED) is signalled.

     4) If there is a problem reading from the text file,
        a routine that <b>SPCAC</b> calls signals an error.

     5) If a non-printing ASCII character is encountered in the
        comments, a routine that <b>SPCAC</b> calls diagnoses and signals
        an error.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     HANDLE      is the handle assigned to the binary SPK or CK file.
                 Use <a href="dafopw.html">DAFOPW</a> to open it for write access and get the
                 handle.  Upon exit, this binary file will contain
                 the specified text from the comment file in its
                 comment area, appended to whatever text may already
                 have been stored there.  <b>SPCAC</b> will include an extra
                 blank line between the original text and the
                 appended text.

     UNIT        is the logical unit connected to the comment file.
                 This file must contain only text (printable
                 ASCII characters, namely ASCII 32-126).  Open this
                 file with read access and get its UNIT using TXTOPR.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     The structure of SPK and CK files accommodates comments in
     addition to data.  The following three routines are available
     for accessing the comment area of a binary SPK or CK file:

           <b>SPCAC</b>           add comments

           <a href="spcec.html">SPCEC</a>           extract comments

           <a href="spcdc.html">SPCDC</a>           delete comments

     Note that comments must consist of only text, that is, printable
     ASCII characters, specifically ASCII 32-126.  This excludes
     tabs (ASCII 9) and control characters.

     The SPC conversion routines---<a href="spcb2a.html">SPCB2A</a>, <a href="spca2b.html">SPCA2B</a>, <a href="spcb2t.html">SPCB2T</a>, and
     <a href="spct2b.html">SPCT2B</a>---include these comments when converting SPK and CK
     files between binary and text formats.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     Suppose we have a binary SPK file called A.BSP and we have
     a text file called COMMENTS.TXT that contains comments
     about the data in the SPK file.

     The following code fragment stores the entire contents of
     COMMENTS.TXT in the comment area of A.BSP.

            CALL <a href="dafopw.html">DAFOPW</a> ( 'A.BSP', HANDLE )

            CALL TXTOPR ( 'COMMENTS.TXT', UNIT )

            BMARK = ' '
            EMARK = ' '

            CALL <b>SPCAC</b>  ( HANDLE, UNIT, BMARK, EMARK )

            CLOSE ( UNIT )

     Now suppose MORE.TXT is a text file that contains additional
     information about the data in A.BSP, as well as information
     about several other SPK files.  The contents of MORE.TXT are

               \begin A info

                 DATAFILE = A
                 SOURCE   = JPL, 1990 September 12
                 MISSION  = Galileo

               \end A info

               \begin B info

                 DATAFILE = B
                 SOURCE   = JPL, 1988 August 1
                 MISSION  = Voyager 2

               \end B info

               \begin C info

                 DATAFILE = C
                 SOURCE   = JPL, 1994 January 31
                 MISSION  = Mars Observer

               \end C info

     This code fragment stores only the information that pertains
     to A.BSP, and appends it to the text from COMMENTS.TXT that
     has already been stored in the comment area of A.BSP

            CALL TXTOPR ( 'MORE.TXT', UNIT )

            BMARK = '\begin A info'
            EMARK = '\end A info'

            CALL <b>SPCAC</b>  ( HANDLE, UNIT, BMARK, EMARK )

            CLOSE ( UNIT )

            CALL <a href="dafcls.html">DAFCLS</a> ( HANDLE )

     Note that, ignoring leading and trailing blanks, BMARK and
     EMARK are exactly equivalent to lines in the text file.
     If the assignment had been instead BMARK = '\ begin A info',
     with an extra space between the slash and the word begin,
     <b>SPCAC</b> would not have found the marker and no comments from
     the text file would be written to the binary file.
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     1)  The lines in the comment file should not exceed 1000
         characters in length.  <b>SPCAC</b> truncates lines longer than
         this on the right.

     2)  Use TXTOPR to open text files for read access and get
         the logical unit.  System dependencies regarding
         opening text files have been isolated in the routines
         TXTOPN and TXTOPR.

     3)  This routine assumes that the comment area of the binary SPK
         or CK file contains only text stored by <b>SPCAC</b>.  Comments
         written any other way may not be handled properly.

     4)  The comment area of the binary SPK or CK file must contain
         only one EOT character.  This routine seeks back from the
         last reserved record searching for the first EOT it
         encounters.  Thus the multiple EOT's will cause the appended
         comments to be invisible to any reader that starts at the
         first reserved record and reads until the first EOT present.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     K.R. Gehringer (JPL)
     J.E. McLean    (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 2.0.0, 16-NOV-2001 (FST)

        Updated this routine to utilize new handle manager
        interfaces.

    SPICELIB Version 1.3.0, 12-FEB-1999 (FST)

        Modified the EOT search code to seek back through any
        reserved records, as opposed to just the last one.  This
        provides the flexibility to use <a href="dafopn.html">DAFOPN</a> to reserve records
        that may ultimately be used for storing comments. As a direct
        result of these changes the SPICE(MISSINGEOT) error is no
        longer signalled, since if no EOT is found in the reserved
        records, they are considered available for writes.

    SPICELIB Version 1.2.0, 12-MAY-1994 (KRG)

        Added an IF statement so that <a href="dafarr.html">DAFARR</a> is called only if new
        reserved records need to be added to the comment area.

    SPICELIB Version 1.1.0, 09-APR-1993 (KRG)

        Added code to initialize the variable LASTRR to zero. This
        variable is used in a function call, MAX ( LASTRR-1, 1 ),
        regardless of whether or not any reserved records are in
        the file. Thus the need to initialize it.

    SPICELIB Version 1.0.1, 10-MAR-1992 (WLT)

        Comment section for permuted index source lines was added
        following the header.

    SPICELIB Version 1.0.0, 05-APR-1991 (JEM)</PRE>
<h4>Link to routine SPCAC source file <a href='../../../src/spicelib/spcac.f'>spcac.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Tue Jul 15 14:25:00 2014</pre>

</body>
</html>

