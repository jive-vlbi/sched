
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>eknelt</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>eknelt</b> </td>
    </tr>

    <tr>
      <td style="vertical-align: top;">

<small><div align="center">
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div></small>
       <br>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
            <small>
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Examples">Examples<br></a>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
             </small>
            </td>
          </tr>
        </tbody>
</table>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
     EKNELT  ( EK, get number of elements in column entry )
 
      ENTRY EKNELT ( SELIDX, ROW, NELT )
 
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Return the number of elements in a specified column entry in
     the current row.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/ek.html">EK</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     EK
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
     INTEGER               SELIDX
     INTEGER               ROW
     INTEGER               NELT
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     Variable  I/O  Description
     --------  ---  --------------------------------------------------
     SELIDX     I   Index of parent column in SELECT clause.
     ROW        I   Row containing element.
     NELT       O   Number of elements in entry in current row.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     SELIDX         is the SELECT clause index of the column to
                    fetch from.

     ROW            is the index of the row containing the element.
                    This number refers to a member of the set of rows
                    matching a query.  ROW must be in the range

                      1 : NMROWS

                    where NMROWS is the matching row count returned
                    by <a href="eksrch.html">EKSRCH</a>.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     NELT           is the number of elements in the column entry
                    belonging to the specified column in the current
                    row.

                    Null entries in variable-size columns are
                    considered to have size 1.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1)  If this routine is called when no E-kernels have been loaded,
         the error SPICE(NOLOADEDFILES) is signaled.

     2)  If SELIDX is outside of the range established by the
         last query passed to <a href="eksrch.html">EKSRCH</a>, the error SPICE(INVALIDINDEX)
         will be signaled.

     3)  If ROW is outside of the range established by the
         last query passed to <a href="eksrch.html">EKSRCH</a>, the error SPICE(INVALIDINDEX)
         will be signaled.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     See the header of <a href="ekqmgr.html">EKQMGR</a> for a description of files used
     by this routine.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     This routine is meant to be used in conjunction with the <a href="ekqmgr.html">EKQMGR</a>
     fetch entry points <a href="ekgc.html">EKGC</a>, <a href="ekgd.html">EKGD</a>, and <a href="ekgi.html">EKGI</a>.  This routine
     allows the caller of those routines to determine appropriate
     loop bounds to use to fetch each column entry in the current row.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     1)  Suppose the EK table TAB contains the following columns:


            Column name   Data Type   Size
            -----------   ---------   ----
            IARRAY        INT         10
            DARRAY        DP          VARIABLE
            CARRAY        CHR         VARIABLE


         Suppose the query

            QUERY = 'SELECT IARRAY, DARRAY, CARRAY FROM TAB'

         is issued to <a href="ekfind.html">EKFIND</a> via the call

            CALL <a href="ekfind.html">EKFIND</a> ( QUERY, NMROWS, ERROR, ERRMSG )

         To fetch and dump column values from the rows that satisfy the
         query, the loop below could be used.  Note that we don't check
         the FOUND flags returned by the fetch routines since we know
         in advance how many elements are contained in each column
         entry we fetch.


                  DO ROW = 1, NMROWS

                     WRITE (*,*) ' '
                     WRITE (*,*) 'ROW  = ', ROW
                     WRITE (*,*) ' '

            C
            C        Fetch values from column IARRAY in the current
            C        row.  Since IARRAY was the first column selected,
            C        the selection index SELIDX is set to 1.
            C
                     SELIDX = 1

                     ELTIDX = 1
                     ISNULL = .FALSE.

                     DO WHILE ( ( ELTIDX .LE. 10 ) .AND. .NOT. ISNULL )
            C
            C           If the column entry is null, we'll be kicked
            C           out of this loop after the first iteration.
            C
                        CALL <a href="ekgi.html">EKGI</a> ( SELIDX,         ROW,     ELTIDX,
                                    IVALS(ELTIDX),  ISNULL,  FOUND   )

                        ELTIDX = ELTIDX + 1

                     END DO

                     WRITE (*,*) ' '
                     WRITE (*,*) 'COLUMN = IARRAY'
                     WRITE (*,*) ' '

                     IF ( ISNULL ) THEN
                        WRITE (*,*) '&lt;Null&gt;'
                     ELSE
                        WRITE (*,*) ( IVALS(I), I = 1, 10 )
                     END IF

            C
            C        Fetch values from column DARRAY in the current
            C        row.  Since DARRAY contains variable-size array
            C        elements, we call <b>EKNELT</b> to determine how many
            C        elements to fetch.
            C
                     SELIDX = 2

                     CALL <b>EKNELT</b> ( SELIDX, ROW, NELT )

                     ELTIDX = 1
                     ISNULL = .FALSE.

                     DO WHILE (       ( ELTIDX .LE.  NELT   )
                 .              .AND. (        .NOT. ISNULL )  )

                        CALL <a href="ekgd.html">EKGD</a> ( SELIDX,         ROW,     ELTIDX,
                                    DVALS(ELTIDX),  ISNULL,  FOUND   )

                        ELTIDX = ELTIDX + 1

                     END DO

                     WRITE (*,*) ' '
                     WRITE (*,*) 'COLUMN = DARRAY'
                     WRITE (*,*) ' '

                     IF ( ISNULL ) THEN
                        WRITE (*,*) '&lt;Null&gt;'
                     ELSE
                        WRITE (*,*) ( DVALS(I), I = 1, NELT )
                     END IF

            C
            C        Fetch values from column CARRAY in the current
            C        row.
            C
                     SELIDX = 3
                     CALL <b>EKNELT</b> ( SELIDX, ROW, NELT )

                     ELTIDX = 1
                     ISNULL = .FALSE.

                     DO WHILE (       ( ELTIDX .LE.  NELT   )
                 .              .AND. (        .NOT. ISNULL )  )

                        CALL <a href="ekgc.html">EKGC</a> ( SELIDX,         ROW,     ELTIDX,
                                    CVALS(ELTIDX),  ISNULL,  FOUND   )

                        ELTIDX = ELTIDX + 1

                     END DO

                     WRITE (*,*) ' '
                     WRITE (*,*) 'COLUMN = CARRAY'
                     WRITE (*,*) ' '

                     IF ( ISNULL ) THEN
                        WRITE (*,*) '&lt;Null&gt;'
                     ELSE
                        WRITE (*,*) ( CVALS(I), I = 1, NELT )
                     END IF

                  END DO
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     N.J. Bachman   (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 2.0.0, 16-NOV-2001 (NJB)

        Bug fix:   When an already loaded kernel is opened with <a href="ekopr.html">EKOPR</a>,
        it now has its link count reset to 1 via a call to <a href="ekcls.html">EKCLS</a>.

    SPICELIB Version 1.2.0, 12-FEB-1999 (NJB)

        Bug fix:  There was a error handling branch that called CHKOUT 
        where CHKIN should have been called.  This has been fixed.

    SPICELIB Version 1.1.0, 09-JUL-1996 (NJB)

        Bug fix:  <b>EKNELT</b> now initiates a sort operation if sorted
        outputs are required and <b>EKNELT</b> is called after query 
        resolution but before the fetch routines.  Also, addressing
        for sorted query results has been fixed.

        Misspelling of &quot;issued&quot; was fixed.  Previous version line was 
        changed from &quot;Beta&quot; to &quot;SPICELIB.&quot;  


    SPICELIB Version 1.0.0, 23-OCT-1995 (NJB)</PRE>
<h4>Link to routine EKNELT source file <a href='../../../src/spicelib/ekqmgr.f'>ekqmgr.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Tue Jul 15 14:24:16 2014</pre>

</body>
</html>

