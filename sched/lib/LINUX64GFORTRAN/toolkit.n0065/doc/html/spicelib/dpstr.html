
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>dpstr</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>dpstr</b> </td>
    </tr>

    <tr>
      <td style="vertical-align: top;">

<small><div align="center">
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div></small>
       <br>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
            <small>
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Examples">Examples<br></a>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
             </small>
            </td>
          </tr>
        </tbody>
</table>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
      DPSTR ( Double Precision Number to Character )
 
      SUBROUTINE DPSTR ( X, SIGDIG, STRING )
 
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Take a double precision number and convert it to
     an equivalent character string representation (base 10).
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
      CHARACTER
      CONVERSION
      PARSING
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
 
      DOUBLE PRECISION X
      INTEGER          SIGDIG
      CHARACTER*(*)    STRING
 
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
      VARIABLE  I/O  DESCRIPTION
      --------  ---  --------------------------------------------------
      X          I   A double precision number
      SIGDIG     I   The number of significant digits placed in output
      STRING     O   A character string representation of X
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
      X          is a double precision number.

      SIGDIG     is the number of significant digits that are desired
                 for the output string.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
      STRING     is a character representation of X to the number of
                 significant digits specified by SIGDIG.  The number of
                 spaces required to return the requested character
                 string is SIGDIG + 6.  If STRING is not declared to
                 have adequate length, the number returned will be
                 truncated on the right.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
      Error free.

      If SIGDIG is less than one, this routine returns one significant
      digit in the output string.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
      None.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
      This routine computes an approximate character representation
      of the input string X. The maximum number of significant
      digits returned is 14. The representation returned will be
      the same as that given by the FORTRAN write statement

          WRITE ( STRING, FMT=(P1E23.xx)

      where xx is a two digit number that represents MIN(14,SIGDIG).
      The last decimal place is rounded. The output string is left
      justified.

      This routine has the advantage that it does not use an internal
      file and is about 2.3 times as fast as an internal write. It can
      be used as part of character function without fear of introducing
      recursive I/O conflicts. It is intended to be an approximate
      inverse to the subroutine <a href="nparsd.html">NPARSD</a>.

      There is of course no formatting of the output string.  All
      outputs are written in scientific notation.

      IF you want the character string representation of a double
      precision number to be the same as that produced by a formatted
      write statement use a FORTRAN write statement.

      For example the number represented by the string

            1.245454545454545454545E+01

      when read (via a FORTRAN READ statement) into the DP variable X
      and converted back to a character string having 14 significant
      digits by this routine yields

            1.2454545454545E+01

      The FORTRAN write statement

            WRITE ( 6, FMT='(P1E)' ) X

      yields

            1.2454545454545454E+01

      If this is too much error for your application DO NOT use this
      routine.  You should be aware however, that a character string
      read into a double precision number may not WRITE out with an
      equivalent character representation as was input.

      For example on a VAX 11/780 if you

            READ  (5,*)         X
            WRITE (6,FMT='(E)') X

      and enter a value of 7.00000001 for the read statement
      the output written will be 0.7000000010000001E+01
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
      This routine is intended for use by routines that manipulate
      character strings.  For example, it may be desirable for a
      routine to be able to take a character string input such as

            12 miles

      and convert it to the string

            1.932E+02 km

      or to simply

            1.932E+02

      The arithmetic is of course most easily handled using numeric
      variables.  However, it may be that a string is required for
      subsequent processing of the input.  A SPICELIB routine <a href="nparsd.html">NPARSD</a>
      exists that will take a character representation of a number
      and convert it to a DOUBLE PRECISION number.  The 12 above
      can be converted to double precision using <a href="nparsd.html">NPARSD</a>,  the d.p.
      number can then be multiplied by the 1.61... and the result
      converted back to a string using this routine.

      Suppose the following declarations are made

            CHARACTER*(80)     TEXT
            CHARACTER*(80)     NUMBER
            CHARACTER*(80)     SCRATCH

            DOUBLE PRECISION   X
            INTEGER            I

      and that TEXT contains the string '12 mi'.  Then the following
      code would produce a character string  '1.932E+01 KM'

            CALL <a href="nextwd.html">NEXTWD</a> (  TEXT,   NUMBER, SCRATCH   )
            CALL <a href="nparsd.html">NPARSD</a> (  NUMBER, X,      ERROR,  I )

            IF ( ERROR .EQ. ' ' ) THEN

               X    = X * 1.61D0
               CALL <b>DPSTR</b> ( X, 5, NUMBER )
               TEXT = NUMBER(1:10) // 'KM'

            ELSE
               .
               .
               create an error message, try again, etc.
               .
               .
            END IF
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
      Note:  The format of the string returned by this routine is
      used in <a href="dpstrf.html">DPSTRF</a> which is in the call tree to <a href="dpfmt.html">DPFMT</a>.  Changes
      to the format of the output string may have unexpected
      consequences for these SPICE routines.  Please check those
      routines before modifying this routine.

      The maximum number of significant digits returned is 14.

      If the output string is not declared to be adequately large
      (at least SIGDIG + 6), the numeric string will be truncated
      to the side opposite its justification.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
      None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
      N.J. Bachman    (JPL)
      H.A. Neilan     (JPL)
      W.L. Taber      (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
     SPICELIB Version 1.1.1, 09-SEP-1996 (WLT)

         Added a reference to the header concerning the dependency
         of the SPICE routines <a href="dpstrf.html">DPSTRF</a> and <a href="dpfmt.html">DPFMT</a> on the format of
         the string produced by this routine.

     SPICELIB Version 1.1.0, 11-JUN-1992 (WLT)

         A bug that caused this routine to have a floating point
         overflow for values of X close to zero was corrected.  In
         addition the restriction on range of exponents supported
         has been removed.

     SPICELIB Version 1.0.1, 10-MAR-1992 (WLT)

         Comment section for permuted index source lines was added
         following the header.

     SPICELIB Version 1.0.0, 31-JAN-1990 (WLT)</PRE>
<h4>Link to routine DPSTR source file <a href='../../../src/spicelib/dpstr.f'>dpstr.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Tue Jul 15 14:24:12 2014</pre>

</body>
</html>

