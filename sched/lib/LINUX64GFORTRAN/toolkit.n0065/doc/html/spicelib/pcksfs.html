
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>pcksfs</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>pcksfs</b> </td>
    </tr>

    <tr>
      <td style="vertical-align: top;">

<small><div align="center">
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div></small>
       <br>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
            <small>
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Examples">Examples<br></a>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
             </small>
            </td>
          </tr>
        </tbody>
</table>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
 PCKSFS ( PCK, select file and segment )

      ENTRY PCKSFS ( BODY, ET, HANDLE, DESCR, <a href="ident.html">IDENT</a>, FOUND )
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Search through loaded files to find the first segment applicable
     to the body and time specified.  Buffer searched segments in the
     process, to attempt to avoid re-reading files.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/pck.html">PCK</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     PCK
     FILES
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
     INTEGER               BODY
     DOUBLE PRECISION      ET
     INTEGER               HANDLE
     DOUBLE PRECISION      DESCR  ( * )
     CHARACTER*(*)         <a href="ident.html">IDENT</a>
     LOGICAL               FOUND
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     Variable  I/O  Description
     --------  ---  --------------------------------------------------
     BODY       I   Body ID.
     ET         I   Ephemeris time.
     HANDLE     O   Handle of file containing the applicable segment.
     DESCR      O   Descriptor of the applicable segment.
     <a href="ident.html">IDENT</a>      O   Identifier of the applicable segment.
     FOUND      O   Indicates whether or not a segment was found.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     BODY       is the NAIF integer code of an ephemeris object,
                typically a solar system body.

     ET         is a time, in seconds past the epoch J2000 TDB.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     HANDLE     on output is the handle of the binary PCK file
                containing a located segment.

     DESCR      is the descriptor of a located segment.

     <a href="ident.html">IDENT</a>      is the identifier of a located segment.

     FOUND      indicates whether a requested segment was found or not.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1) If an attempt is made to call <b>PCKSFS</b> when there aren't any
        files loaded, the error SPICE(NOLOADEDFILES) is signaled.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     All files loaded by <a href="pcklof.html">PCKLOF</a> are potential search targets for
     <b>PCKSFS</b>.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     This routine finds the highest-priority segment, in any loaded
     PCK file, such that the segment provides data for the specified
     body and epoch.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     See the Example above, in <a href="pckbsr.html">PCKBSR</a>.
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     1) If Fortran I/O errors occur while searching a loaded PCK
        file, the internal state of this suite of routines may
        be corrupted.  It may be possible to correct the state
        by unloading the pertinent PCK files and then re-loading
        them.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     N.J. Bachman    (JPL)
     K.S. Zukor      (JPL)
     R.E. Thurman    (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 4.2.1, 03-JAN-2014 (EDW)

        Minor edits to Procedure; clean trailing whitespace.
        Removed unneeded Revisions section.

    SPICELIB Version 4.2.0, 01-MAR-2011 (NJB)

        Bug fix:

          In the <b>PCKSFS</b> 'MAKE ROOM' state, when the suspended activity
          is 'ADD TO FRONT' and no segment table room is available,
          the body table's pointer to the current segment list
          is now set to null. Previously the pointer was allowed to go
          stale.

    SPICELIB Version 4.1.0, 08-SEP-2005 (NJB)

        Updated to remove non-standard use of duplicate arguments
        in MOVED call.

    SPICELIB Version 1.1.0, 08-NOV-2001 (NJB)

        Bug fixes:

           1) When a segment list is freed because the entire list
              is contributed by a single PCK file, and the list is
              too large to be buffered, the corresponding body table
              pointer is now set to null.

           2) An algorithm change has eliminated a bug caused by not
              updating the current body index when body table entries
              having empty segment lists were compressed out of the
              body table.  Previously the body table pointer BINDEX
              could go stale after the compression.

           3) DAF calls are now followed by tests of <a href="failed.html">FAILED</a>()
              in order to ensure that the main state loop terminates.

           4) A subscript bound violation in a loop termination test
              was corrected.  The loop is located in the
              'SEARCH W/O BUFFERING' block; it finds the start of a
              partial list that is to be freed.

        The &quot;re-use interval&quot; feature was introduced to improve speed
        in the case where repeated, consecutive requests are satisified
        by the same segment.

        The segment list cost algorithm was modified slightly:
        the contribution of a file search to the cost of a list
        is included only when the file search is completed.  The
        cost of finding the re-use interval is accounted for when
        unbuffered searches are required.

        The file table size has been increased to 1000, in order
        to take advantage of the DAF system's new ability to load
        1000 files.

        The body table size has been increased to 200 in order to
        decrease the chance of thrashing due to swapping segment
        lists for different bodies.

        Various small updates and corrections were made to the
        comments throughout the file.

        In order to simplify the source code, the in-line singly
        linked list implementation of the segment table has been
        replaced by an implementation relying on the SPICELIB
        doubly linked list routines.

    SPICELIB Version 1.0.0, 16-MAR-1994 (KSZ)

        This differs only slightly from the SPKXXX code.
        The main difference is that the SFS subroutine returns
        FOUND = FALSE if no files are found, rather than returning
        an error.</PRE>
<h4>Link to routine PCKSFS source file <a href='../../../src/spicelib/pckbsr.f'>pckbsr.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Tue Jul 15 14:24:44 2014</pre>

</body>
</html>

