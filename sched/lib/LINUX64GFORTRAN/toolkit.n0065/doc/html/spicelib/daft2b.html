
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>daft2b</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>daft2b</b> </td>
    </tr>

    <tr>
      <td style="vertical-align: top;">

<small><div align="center">
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div></small>
       <br>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
            <small>
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Examples">Examples<br></a>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
             </small>
            </td>
          </tr>
        </tbody>
</table>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
 DAFT2B ( DAF, text to binary )
 
      SUBROUTINE DAFT2B ( TEXT, BINARY, RESV )
 
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Deprecated. The routine <a href="daftb.html">DAFTB</a> supersedes this routine.
     NAIF supports this routine only to provide backward 
     compatibility.

     Reconstruct a binary DAF from a text file opened by
     the calling program.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/daf.html">DAF</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     FILES
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
 
      INTEGER               TEXT
      CHARACTER*(*)         BINARY
      INTEGER               RESV
 
      INTEGER               BSIZE
      PARAMETER           ( BSIZE = 1024 )
 
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     Variable  I/O  Description
     --------  ---  --------------------------------------------------
     TEXT       I   Logical unit connected to text file.
     BINARY     I   Name of a binary DAF to be created.
     RESV       I   Number of records to reserve.
     BSIZE      P   Buffer size.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     TEXT        is a logical unit number, to which a text file has
                 been connected by the calling program, and into
                 which the contents of binary DAF have been
                 written. The file pointer should be placed just
                 before the file ID word.

     BINARY      is the name of a binary DAF to be created.
                 The binary DAF contains the same data as the
                 text file, but in a form more suitable for use
                 by application programs.

     RESV        is the number of records to be reserved in the
                 binary DAF.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     BSIZE       is the size of the buffer used to read array elements
                 from the text file. No single group of elements should
                 contains more than BSIZE elements.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1) If for some reason the text file cannot be read,
        the error SPICE(DAFREADFAIL) is signalled.

     2) If the architecture of the file is not DAF, as specified by
        the ID word, the error SPICE(NOTADAFFILE) will be signalled.

     3) If the text file does not contain matching internal file
        names, the error SPICE(DAFNOIFNMATCH) is signalled.

     4) If the text file does not contain matching array names,
        the error SPICE(DAFNONAMEMATCH) is signalled.

     5) If the buffer size is not sufficient, the error
        SPICE(DAFOVERFLOW) is signalled.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     See arguments TEXT, BINARY.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     This routine has been made obsolete by the new DAF text to binary
     conversion routine <a href="daftb.html">DAFTB</a>. This routine remains available for
     reasons of backward compatibility. We strongly recommend that you
     use the new conversion routines for any new software development.
     Please see the header of the routine <a href="daftb.html">DAFTB</a> for details.

     This routine is necessary for converting older DAF text files into
     their equivalent binary formats, as <a href="daftb.html">DAFTB</a> uses a different text
     file format that is incompatible with the text file format
     expected by this routine.

     Any binary DAF may be transferred between heterogeneous
     Fortran environments by converting it to an equivalent file
     containing only ASCII characters. Such a file can be transferred
     almost universally, using any number of established protocols
     (Kermit, FTP, and so on). Once transferred, the ASCII file can
     be reconverted to a binary DAF, using the representations
     native to the new host environment.

     There are two pairs of routines that can be used to convert
     DAFs between binary and ASCII. The first pair, <a href="dafb2a.html">DAFB2A</a>
     and <a href="dafa2b.html">DAFA2B</a>, works with complete files. That is, <a href="dafb2a.html">DAFB2A</a> creates
     a complete ASCII file containing all of the information in
     a particular binary DAF, and nothing else; this file can
     be fed directly into <a href="dafa2b.html">DAFA2B</a> to produce a complete binary DAF.
     In each case, the names of the files are specified.

     A related pair of routines, <a href="dafb2t.html">DAFB2T</a> and <b>DAFT2B</b>, assume that
     the ASCII data are to be stored in the midst of a text file.
     This allows the calling program to surround the data with
     standardized labels, to append several binary DAFs into a
     single text file, and so on.

     Note that you must select the number of records to be reserved
     in the binary DAF. The contents of reserved records are ignored
     by the normal transfer process.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     <a href="dafb2a.html">DAFB2A</a> and <a href="dafa2b.html">DAFA2B</a> are typically used for simple transfers.
     If A.DAF is a binary DAF in environment 1, it can be transferred
     to environment 2 in three steps.

        1) Convert it to ASCII:

              CALL <a href="dafb2a.html">DAFB2A</a> ( 'A.DAF', 'A.ASCII' )

        2) Transfer the ASCII file, using FTP, Kermit, or some other
           file transfer utility:

              ftp&gt; put a.ascii

        3) Convert it to binary on the new machine,

              CALL <a href="dafa2b.html">DAFA2B</a> ( 'A.ASCII', 'A.DAF', RESV )

     Note that <a href="dafb2a.html">DAFB2A</a> and <a href="dafa2b.html">DAFA2B</a> work in any standard Fortran-77
     environment.

     If the file needs to contain other information---a standard
     label, for instance---the first and third steps must be modified
     to use <a href="dafb2t.html">DAFB2T</a> and <b>DAFT2B</b>. The first step becomes

        (Open a text file)
        (Write the label)
        CALL <a href="dafb2t.html">DAFB2T</a> ( BINARY, UNIT  )
        (Close the text file)

     The third step becomes

        (Open the text file)
        (Read the label)
        CALL <b>DAFT2B</b> ( UNIT, BINARY, RESV )
        (Close the text file)
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     <b>DAFT2B</b> cannot be executed while any other DAF is open
     for writing.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     NAIF Document 167.0, &quot;Double Precision Array Files (DAF)
     Specification and User's Guide&quot;
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     K. R. Gehringer (JPL)
     J.E. McLean     (JPL)
     I.M. Underwood  (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 3.0.1, 26-JUL-2012 (EDW)

        Edited Abstract section to use &quot;Deprecated&quot; keyword
        and state replacement routine.

        Eliminated unneeded Revisions section.

    SPICELIB Version 3.0.0, 04-OCT-1993 (KRG)

        Removed the error SPICE(DAFNOIDWORD) as it was no longer
        relevant.

        Added the error SPICE(NOTADAFFILE) if this routine is called
        with a file that does not contain an ID word identifying the
        file as a DAF file.

        There were no checks of the IOSTAT variable after attempting to
        read from the text file, a single test of the IOSTAT variable
        was made at the end of the routine. This was not adequate to
        detect errors when writing to the text file. So after all of
        these read statements, an IF ... END IF block was added to
        signal an error if IOSTAT .NE. 0.

            IF ( IOSTAT .NE. 0 ) THEN

               CALL <a href="setmsg.html">SETMSG</a> ( 'The attempt to read from file ''#''' //
         .                   ' failed. IOSTAT = #.'                 )
               CALL <a href="errfnm.html">ERRFNM</a> ( '#', UNIT                              )
               CALL <a href="sigerr.html">SIGERR</a> ( 'SPICE(DAFREADFAIL)'                   )
               CALL CHKOUT ( '<b>DAFT2B</b>'                               )
               RETURN

            END IF

        Removed the code from the end of the routine that purported to
        check for read errors:

            C
            C     If any read screws up, they should all screw up. Why
            C     make a billion separate checks?
            C
                  IF ( IOSTAT .NE. 0 ) THEN
                     CALL <a href="setmsg.html">SETMSG</a> ( 'Value of IOSTAT was: #. ' )
                     CALL <a href="errint.html">ERRINT</a> ( '#', IOSTAT                )
                     CALL <a href="sigerr.html">SIGERR</a> ( 'SPICE(DAFREADFAIL)'       )
                   END IF

        The answer to the question is:

            You have to do a billion separate checks because the IOSTAT
            value is only valid for the most recently executed read.

        Added a statment to the $ Particulars section to the effect
        that this routine has been made obsolete by the introduction of
        the routine <a href="daftb.html">DAFTB</a>, and that we strongly recommend the use of
        the new routine. This routine must, however, be used when
        converting older text files to binary, as the old and new
        formats are not compatible.

        Modified the $ Abstract section to reflect the fact that this
        routine is obsolete and maintained for purposes of backward
        compatibility only.

    SPICELIB Version 2.0.2, 10-MAR-1992 (WLT)

        Comment section for permuted index source lines was added
        following the header.

    SPICELIB Version 2.0.1,  6-AUG-1990 (HAN)

        Header documentation was corrected. This routine will
        convert a file containing either ID word, 'NAIF/DAF' or
        'NAIF/NIP'. (Previous versions of SPICELIB software used
        the ID word 'NAIF/NIP'.)

    SPICELIB Version 2.0.0,  2-AUG-1990 (JEM)

        The previous version of this routine always failed and
        signalled the error SPICE(DAFNOIDWORD) because of a faulty
        logical expression in an error-checking IF statement.
        The error SPICE(DAFNOIDWORD) should be signalled if the
        next non-blank line in the text file does not begin with the
        word 'NAIF/DAF' AND does not begin with the word 'NAIF/NIP'.
        Previously the logic was incorrect causing the error to be
        signalled every time no matter what the word was. The
        correction consisted of replacing '.OR.' with '.AND.'
        in the logical expression.

    SPICELIB Version 1.0.1, 22-MAR-1990 (HAN)

        Literature references added to the header.

    SPICELIB Version 1.0.0, 31-JAN-1990 (IMU)</PRE>
<h4>Link to routine DAFT2B source file <a href='../../../src/spicelib/daft2b.f'>daft2b.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Tue Jul 15 14:24:06 2014</pre>

</body>
</html>

