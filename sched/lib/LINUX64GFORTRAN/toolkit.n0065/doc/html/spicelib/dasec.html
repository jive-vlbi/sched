
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>dasec</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>dasec</b> </td>
    </tr>

    <tr>
      <td style="vertical-align: top;">

<small><div align="center">
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div></small>
       <br>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
            <small>
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </small>
              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">
              <small>               <a href="#Examples">Examples<br></a>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
             </small>
            </td>
          </tr>
        </tbody>
</table>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
  DASEC  ( DAS extract comments )
 
      SUBROUTINE DASEC ( HANDLE, BUFSIZ, N, BUFFER, DONE )
 
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Extract comments from the comment area of a binary DAS file.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/das.html">DAS</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     FILES
     UTILITY
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
 
      INTEGER               HANDLE
      INTEGER               BUFSIZ
      INTEGER               N
      CHARACTER*(*)         BUFFER(*)
      LOGICAL               DONE
 
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     Variable  I/O  Description
     --------  ---  --------------------------------------------------
      HANDLE    I   Handle of binary DAS file open with read access.
      BUFSIZ    I   Maximum size, in lines, of BUFFER.
      N         O   Number of comments extracted from the DAS file.
      BUFFER    O   Buffer in which extracted comments are placed.
      DONE      O   Indicates whether all comments have been extracted.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     HANDLE   The file handle of a binary DAS file which has been
              opened with read access.

     BUFSIZ   The maximum number of comments that may be placed into
              BUFFER. This would typically be the declared array size
              for the Fortran character string array passed into this
              routine.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     N        The number of comment lines extracted from the comment
              area of the binary DAS file attached to HANDLE. This
              number will be &lt;= BUFSIZ on output. If N = BUFSIZ and
              DONE &lt;&gt; .TRUE. then there are more comments left to to
              extract. If N = 0, then DONE = .TRUE., i.e., there were
              no comments in the comment area. If there are comments
              in the comment area, or comments remaining after the
              extraction process has begun, N &gt; 0, always.

     BUFFER   A list of at most BUFSIZ comments which have been
              extracted from the comment area of the binary DAS
              file attached to HANDLE.

     DONE     A logical flag indicating whether or not all of the
              comment lines from the comment area of the DAS file have
              been read. This variable has the value .TRUE. after the
              last comment line has been read. It will have the value
              .FALSE. otherwise.

              If there are no comments in the comment area, this
              variable will have the value .TRUE., and N = 0.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1)   If the size of the output line buffer is is not positive,
          the error SPICE(INVALIDARGUMENT) will be signalled.

     3)   If a comment line in a DAS file is longer than the length
          of a character string array element of BUFFER, the error
          SPICE(COMMENTTOOLONG) will be signalled.

     3)   If there is a mismatch between the number of comment
          characters found and the number of comment characters
          expected, the error SPICE(BADDASCOMMENTAREA) will be
          signalled.

     4)   If the binary DAS file attached to HANDLE is not open for
          reading, an error will be signalled by a routine called by
          this routine.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     See argument HANDLE in $ Detailed_Input.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     Binary DAS files contain an area which is reserved for storing
     annotations or descriptive textual information describing the data
     contained in a file. This area is referred to as the ``comment
     area'' of the file. The comment area of a DAS file is a line
     oriented medium for storing textual information. The comment
     area preserves any leading or embedded white space in the line(s)
     of text which are stored, so that the appearance of the of
     information will be unchanged when it is retrieved (extracted) at
     some other time. Trailing blanks, however, are NOT preserved,
     due to the way that character strings are represented in
     standard Fortran 77.

     This routine will read the comments from the comment area of
     a binary DAS file, placing them into a line buffer. If the line
     buffer is not large enough to hold the entire comment area,
     the portion read will be returned to the caller, and the DONE
     flag will be set to .FALSE.. This allows the comment area to be
     read in ``chunks,'' a buffer at a time. After all of the comment
     lines have been read, the DONE flag will be set to .TRUE..

     This routine can be used to ``simultaneously'' extract comments
     from the comment areas of multiple binary DAS files. See Example
     2 in the $ Examples section.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     Example 1
     ---------

     The following example will extract the entire comment area of a
     binary DAS file attached to HANDLE, displaying the comments on
     the terminal screen.

     Let

        BUFFER  have the following declaration:

           CHARACTER*(80)  BUFFER(25)

        HANDLE  be the handle of an open binary DAS file.

     then

        BUFSIZ = 25
        DONE   = .FALSE.

        DO WHILE ( .NOT. DONE )

           CALL <b>DASEC</b>( HANDLE, BUFSIZ, N, BUFFER, DONE )

           DO I = 1, N

              WRITE (*,*) BUFFER(I)

           END DO

        END DO

     Example 2
     ---------

     The following example demonstrates the use of this routine to
     simultaneously read the comment areas of multiple DAS files.
     For each file, the comments will be displayed on the screen as
     they are extracted.

     Let

        BUFFER  have the following declaration:

           CHARACTER*(80)  BUFFER(25)

        NUMFIL     be the number of binary DAS files that are to have
                   their comment areas displayed.

        DASNAM(I)  Be a list of filenames for the DAS files which are
                   to have their comment areas displayed.

        HANDLE(I)  be a list of handles for the DAS files which are
                   to have their comment areas displayed.

        DONE(I)    be a list of logical flags indicating whether
                   we are done extracting the comment area from the
                   DAS file attached to HANDLE(I)

     then

            BUFSIZ = 25

            DO I = 1, NUMFIL

               DONE(I)   = .FALSE.
               HANDLE(I) = 0

            END DO
     C
     C      Open the DAS files.
     C
            DO I = 1, NUMFIL

               CALL DASOPR ( DASNAM(I), HANDLE(I) )

            END DO
     C
     C      While there are still some comments left to read in at
     C      least one of the files, read them and display them.
     C
            DO WHILE ( .NOT. <a href="alltru.html">ALLTRU</a>( DONE, NUMFIL ) )

               DO I = 1, NUMFIL

                  IF ( .NOT. DONE(I) ) THEN

                     WRITE (*,*)
                     WRITE (*,*) 'File: ', DASNAM(I)(:<a href="rtrim.html">RTRIM</a>(DASNAM(I)))
                     WRITE (*,*)
                     N = 0

                     CALL <b>DASEC</b> ( HANDLE(I),
           .                      BUFSIZ,
           .                      N,
           .                      BUFFER,
           .                      DONE(I) )

                     DO J = 1, N

                        WRITE (*,*) BUFFER(J)(:<a href="rtrim.html">RTRIM</a>(BUFFER(J)))

                     END DO

                  END IF

               END DO

            END DO
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     1) The comment area may consist only of printing ASCII characters,
        decimal values 32 - 126. See the MAXPCH and MINPCH parameters
        defined in the $ Local Parameters section.

     2) There is NO maximum length imposed on the significant portion
        of a text line that may be placed into the comment area of a
        DAS file. The maximum length of a line stored in the comment
        area should be kept reasonable, so that they may be easily
        extracted. A good value for this would be 255 characters, as
        this can easily accomodate ``screen width'' lines as well as
        long lines which may contain some other form of information.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     K.R. Gehringer (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 1.3.0, 18-JUN-1999 (WLT)

        Changed name used in CHKOUT to be consistent with the CHKIN
        value.

    SPICELIB Version 1.2.0, 04-AUG-1994 (KRG)

        Rearranged some of the code to avoid always reading the file
        record. Now we look for the input HANDLE in the file table
        first, and only read the file record if we do not find it. Also
        added a new array to be saved: FILCNT. This is the number of
        comment characters in a file; we save it now rather than
        reading it every time.

        Fixed a bug. If the Fortran character string array elements
        have exactly the same length as a comment in the comment area,
        this routine would halt rather unexpectedly from a memory over
        run.

    SPICELIB Version 1.1.0, 22-NOV-1993 (KRG)

        Changed the value of the parameter FTSIZE from 20 to 21. This
        change makes the value of FTSIZE in <b>DASEC</b> compatible with the
        value in DASFM. See DASFM for a discussion of the reasons for
        the increase in the value.

    SPICELIB Version 1.0.0, 23-NOV-1992 (KRG)</PRE>
<h4>Link to routine DASEC source file <a href='../../../src/spicelib/dasec.f'>dasec.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Tue Jul 15 14:24:08 2014</pre>

</body>
</html>

